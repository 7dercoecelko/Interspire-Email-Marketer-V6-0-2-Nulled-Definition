!function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):window.jQuery)}(function(a){"use strict";var b=0;a.ajaxTransport("iframe",function(c){if(c.async){var e,f,g,d=c.initialIframeSrc||"javascript:false;";return{send:function(h,i){e=a('<form style="display:none;"></form>'),e.attr("accept-charset",c.formAcceptCharset),g=/\?/.test(c.url)?"&":"?","DELETE"===c.type?(c.url=c.url+g+"_method=DELETE",c.type="POST"):"PUT"===c.type?(c.url=c.url+g+"_method=PUT",c.type="POST"):"PATCH"===c.type&&(c.url=c.url+g+"_method=PATCH",c.type="POST"),b+=1,f=a('<iframe src="'+d+'" name="iframe-transport-'+b+'"></iframe>').bind("load",function(){var b,g=a.isArray(c.paramName)?c.paramName:[c.paramName];f.unbind("load").bind("load",function(){var b;try{if(b=f.contents(),!b.length||!b[0].firstChild)throw new Error}catch(c){b=void 0}i(200,"success",{iframe:b}),a('<iframe src="'+d+'"></iframe>').appendTo(e),window.setTimeout(function(){e.remove()},0)}),e.prop("target",f.prop("name")).prop("action",c.url).prop("method",c.type),c.formData&&a.each(c.formData,function(b,c){a('<input type="hidden"/>').prop("name",c.name).val(c.value).appendTo(e)}),c.fileInput&&c.fileInput.length&&"POST"===c.type&&(b=c.fileInput.clone(),c.fileInput.after(function(a){return b[a]}),c.paramName&&c.fileInput.each(function(b){a(this).prop("name",g[b]||c.paramName)}),e.append(c.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data"),c.fileInput.removeAttr("form")),e.submit(),b&&b.length&&c.fileInput.each(function(c,d){var e=a(b[c]);a(d).prop("name",e.prop("name")).attr("form",e.attr("form")),e.replaceWith(d)})}),e.append(f).appendTo(document.body)},abort:function(){f&&f.unbind("load").prop("src",d),e&&e.remove()}}}}),a.ajaxSetup({converters:{"iframe text":function(b){return b&&a(b[0].body).text()},"iframe json":function(b){return b&&a.parseJSON(a(b[0].body).text())},"iframe html":function(b){return b&&a(b[0].body).html()},"iframe xml":function(b){var c=b&&b[0];return c&&a.isXMLDoc(c)?c:a.parseXML(c.XMLDocument&&c.XMLDocument.xml||a(c.body).html())},"iframe script":function(b){return b&&a.globalEval(a(b[0].body).text())}}})}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b=0,c=Array.prototype.slice;a.cleanData=function(b){return function(c){var d,e,f;for(f=0;null!=(e=c[f]);f++)try{d=a._data(e,"events"),d&&d.remove&&a(e).triggerHandler("remove")}catch(g){}b(c)}}(a.cleanData),a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];return b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var f,b=this._super,c=this._superApply;return this._super=a,this._superApply=e,f=d.apply(this,arguments),this._super=b,this._superApply=c,f}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g),g},a.widget.extend=function(b){for(var g,h,d=c.call(arguments,1),e=0,f=d.length;f>e;e++)for(g in d[e])h=d[e][g],d[e].hasOwnProperty(g)&&void 0!==h&&(a.isPlainObject(h)?b[g]=a.isPlainObject(b[g])?a.widget.extend({},b[g],h):a.widget.extend({},h):b[g]=h);return b},a.widget.bridge=function(b,d){var e=d.prototype.widgetFullName||b;a.fn[b]=function(f){var g="string"==typeof f,h=c.call(arguments,1),i=this;return g?this.each(function(){var c,d=a.data(this,e);return"instance"===f?(i=d,!1):d?a.isFunction(d[f])&&"_"!==f.charAt(0)?(c=d[f].apply(d,h),c!==d&&void 0!==c?(i=c&&c.jquery?i.pushStack(c.get()):c,!1):void 0):a.error("no such method '"+f+"' for "+b+" widget instance"):a.error("cannot call methods on "+b+" prior to initialization; attempted to call method '"+f+"'")}):(h.length&&(f=a.widget.extend.apply(null,[f].concat(h))),this.each(function(){var b=a.data(this,e);b?(b.option(f||{}),b._init&&b._init()):a.data(this,e,new d(f,this))})),i}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(c,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=b++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this.options=a.widget.extend({},this.options,this._getCreateOptions(),c),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(b,c){var e,f,g,d=b;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof b)if(d={},e=b.split("."),b=e.shift(),e.length){for(f=d[b]=a.widget.extend({},this.options[b]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(b=e.pop(),1===arguments.length)return void 0===f[b]?null:f[b];f[b]=c}else{if(1===arguments.length)return void 0===this.options[b]?null:this.options[b];d[b]=c}return this._setOptions(d),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!b),b&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){return b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof g?f[g]:g).apply(f,arguments):void 0}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^([\w:-]*)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(b,c){c=(c||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,b.unbind(c).undelegate(c),this.bindings=a(this.bindings.not(b).get()),this.focusable=a(this.focusable.not(b).get()),this.hoverable=a(this.hoverable.not(b).get())},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}});a.widget}),function(a){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],a):"object"==typeof exports?a(require("jquery"),require("./vendor/jquery.ui.widget")):a(window.jQuery)}(function(a){"use strict";function b(b){var c="dragover"===b;return function(d){d.dataTransfer=d.originalEvent&&d.originalEvent.dataTransfer;var e=d.dataTransfer;e&&-1!==a.inArray("Files",e.types)&&this._trigger(b,a.Event(b,{delegatedEvent:d}))!==!1&&(d.preventDefault(),c&&(e.dropEffect="copy"))}}a.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||a('<input type="file">').prop("disabled")),a.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),a.support.xhrFormDataFileUpload=!!window.FormData,a.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),a.widget("blueimp.fileupload",{options:{dropZone:a(document),pasteZone:void 0,fileInput:void 0,replaceFileInput:!0,paramName:void 0,singleFileUploads:!0,limitMultiFileUploads:void 0,limitMultiFileUploadSize:void 0,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:void 0,forceIframeTransport:!1,redirect:void 0,redirectParamName:void 0,postMessage:void 0,multipart:!0,maxChunkSize:void 0,uploadedBytes:void 0,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(b,c){return b=this.messages[b]||b.toString(),c&&a.each(c,function(a,c){b=b.replace("{"+a+"}",c)}),b},formData:function(a){return a.serializeArray()},add:function(b,c){return b.isDefaultPrevented()?!1:void((c.autoUpload||c.autoUpload!==!1&&a(this).fileupload("option","autoUpload"))&&c.process().done(function(){c.submit()}))},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:a.support.blobSlice&&function(){var a=this.slice||this.webkitSlice||this.mozSlice;return a.apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(a,b,c){var d=a-this.timestamp;return(!this.bitrate||!c||d>c)&&(this.bitrate=(b-this.loaded)*(1e3/d)*8,this.loaded=b,this.timestamp=a),this.bitrate}},_isXHRUpload:function(b){return!b.forceIframeTransport&&(!b.multipart&&a.support.xhrFileUpload||a.support.xhrFormDataFileUpload)},_getFormData:function(b){var c;return"function"===a.type(b.formData)?b.formData(b.form):a.isArray(b.formData)?b.formData:"object"===a.type(b.formData)?(c=[],a.each(b.formData,function(a,b){c.push({name:a,value:b})}),c):[]},_getTotal:function(b){var c=0;return a.each(b,function(a,b){c+=b.size||1}),c},_initProgressObject:function(b){var c={loaded:0,total:0,bitrate:0};b._progress?a.extend(b._progress,c):b._progress=c},_initResponseObject:function(a){var b;if(a._response)for(b in a._response)a._response.hasOwnProperty(b)&&delete a._response[b];else a._response={}},_onProgress:function(b,c){if(b.lengthComputable){var e,d=Date.now?Date.now():(new Date).getTime();if(c._time&&c.progressInterval&&d-c._time<c.progressInterval&&b.loaded!==b.total)return;c._time=d,e=Math.floor(b.loaded/b.total*(c.chunkSize||c._progress.total))+(c.uploadedBytes||0),this._progress.loaded+=e-c._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(d,this._progress.loaded,c.bitrateInterval),c._progress.loaded=c.loaded=e,c._progress.bitrate=c.bitrate=c._bitrateTimer.getBitrate(d,e,c.bitrateInterval),this._trigger("progress",a.Event("progress",{delegatedEvent:b}),c),this._trigger("progressall",a.Event("progressall",{delegatedEvent:b}),this._progress)}},_initProgressListener:function(b){var c=this,d=b.xhr?b.xhr():a.ajaxSettings.xhr();d.upload&&(a(d.upload).bind("progress",function(a){var d=a.originalEvent;a.lengthComputable=d.lengthComputable,a.loaded=d.loaded,a.total=d.total,c._onProgress(a,b)}),b.xhr=function(){return d})},_isInstanceOf:function(a,b){return Object.prototype.toString.call(b)==="[object "+a+"]"},_initXHRData:function(b){var d,c=this,e=b.files[0],f=b.multipart||!a.support.xhrFileUpload,g="array"===a.type(b.paramName)?b.paramName[0]:b.paramName;b.headers=a.extend({},b.headers),b.contentRange&&(b.headers["Content-Range"]=b.contentRange),f&&!b.blob&&this._isInstanceOf("File",e)||(b.headers["Content-Disposition"]='attachment; filename="'+encodeURI(e.name)+'"'),f?a.support.xhrFormDataFileUpload&&(b.postMessage?(d=this._getFormData(b),b.blob?d.push({name:g,value:b.blob}):a.each(b.files,function(c,e){d.push({name:"array"===a.type(b.paramName)&&b.paramName[c]||g,value:e})})):(c._isInstanceOf("FormData",b.formData)?d=b.formData:(d=new FormData,a.each(this._getFormData(b),function(a,b){d.append(b.name,b.value)})),b.blob?d.append(g,b.blob,e.name):a.each(b.files,function(e,f){(c._isInstanceOf("File",f)||c._isInstanceOf("Blob",f))&&d.append("array"===a.type(b.paramName)&&b.paramName[e]||g,f,f.uploadName||f.name)})),b.data=d):(b.contentType=e.type||"application/octet-stream",b.data=b.blob||e),b.blob=null},_initIframeSettings:function(b){var c=a("<a></a>").prop("href",b.url).prop("host");b.dataType="iframe "+(b.dataType||""),b.formData=this._getFormData(b),b.redirect&&c&&c!==location.host&&b.formData.push({name:b.redirectParamName||"redirect",value:b.redirect})},_initDataSettings:function(a){this._isXHRUpload(a)?(this._chunkedUpload(a,!0)||(a.data||this._initXHRData(a),this._initProgressListener(a)),a.postMessage&&(a.dataType="postmessage "+(a.dataType||""))):this._initIframeSettings(a)},_getParamName:function(b){var c=a(b.fileInput),d=b.paramName;return d?a.isArray(d)||(d=[d]):(d=[],c.each(function(){for(var b=a(this),c=b.prop("name")||"files[]",e=(b.prop("files")||[1]).length;e;)d.push(c),e-=1}),d.length||(d=[c.prop("name")||"files[]"])),d},_initFormSettings:function(b){b.form&&b.form.length||(b.form=a(b.fileInput.prop("form")),b.form.length||(b.form=a(this.options.fileInput.prop("form")))),b.paramName=this._getParamName(b),b.url||(b.url=b.form.prop("action")||location.href),b.type=(b.type||"string"===a.type(b.form.prop("method"))&&b.form.prop("method")||"").toUpperCase(),"POST"!==b.type&&"PUT"!==b.type&&"PATCH"!==b.type&&(b.type="POST"),b.formAcceptCharset||(b.formAcceptCharset=b.form.attr("accept-charset"))},_getAJAXSettings:function(b){var c=a.extend({},this.options,b);return this._initFormSettings(c),this._initDataSettings(c),c},_getDeferredState:function(a){return a.state?a.state():a.isResolved()?"resolved":a.isRejected()?"rejected":"pending"},_enhancePromise:function(a){return a.success=a.done,a.error=a.fail,a.complete=a.always,a},_getXHRPromise:function(b,c,d){var e=a.Deferred(),f=e.promise();return c=c||this.options.context||f,b===!0?e.resolveWith(c,d):b===!1&&e.rejectWith(c,d),f.abort=e.promise,this._enhancePromise(f)},_addConvenienceMethods:function(b,c){var d=this,e=function(b){return a.Deferred().resolveWith(d,b).promise()};c.process=function(b,f){return(b||f)&&(c._processQueue=this._processQueue=(this._processQueue||e([this])).pipe(function(){return c.errorThrown?a.Deferred().rejectWith(d,[c]).promise():e(arguments)}).pipe(b,f)),this._processQueue||e([this])},c.submit=function(){return"pending"!==this.state()&&(c.jqXHR=this.jqXHR=d._trigger("submit",a.Event("submit",{delegatedEvent:b}),this)!==!1&&d._onSend(b,this)),this.jqXHR||d._getXHRPromise()},c.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",d._trigger("fail",null,this),d._getXHRPromise(!1))},c.state=function(){return this.jqXHR?d._getDeferredState(this.jqXHR):this._processQueue?d._getDeferredState(this._processQueue):void 0},c.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===d._getDeferredState(this._processQueue)},c.progress=function(){return this._progress},c.response=function(){return this._response}},_getUploadedBytes:function(a){var b=a.getResponseHeader("Range"),c=b&&b.split("-"),d=c&&c.length>1&&parseInt(c[1],10);return d&&d+1},_chunkedUpload:function(b,c){b.uploadedBytes=b.uploadedBytes||0;var l,m,d=this,e=b.files[0],f=e.size,g=b.uploadedBytes,h=b.maxChunkSize||f,i=this._blobSlice,j=a.Deferred(),k=j.promise();return this._isXHRUpload(b)&&i&&(g||f>h)&&!b.data?c?!0:g>=f?(e.error=b.i18n("uploadedBytes"),this._getXHRPromise(!1,b.context,[null,"error",e.error])):(m=function(){var c=a.extend({},b),k=c._progress.loaded;c.blob=i.call(e,g,g+h,e.type),c.chunkSize=c.blob.size,c.contentRange="bytes "+g+"-"+(g+c.chunkSize-1)+"/"+f,d._initXHRData(c),d._initProgressListener(c),l=(d._trigger("chunksend",null,c)!==!1&&a.ajax(c)||d._getXHRPromise(!1,c.context)).done(function(e,h,i){g=d._getUploadedBytes(i)||g+c.chunkSize,k+c.chunkSize-c._progress.loaded&&d._onProgress(a.Event("progress",{lengthComputable:!0,loaded:g-c.uploadedBytes,total:g-c.uploadedBytes}),c),b.uploadedBytes=c.uploadedBytes=g,c.result=e,c.textStatus=h,c.jqXHR=i,d._trigger("chunkdone",null,c),d._trigger("chunkalways",null,c),f>g?m():j.resolveWith(c.context,[e,h,i])}).fail(function(a,b,e){c.jqXHR=a,c.textStatus=b,c.errorThrown=e,d._trigger("chunkfail",null,c),d._trigger("chunkalways",null,c),j.rejectWith(c.context,[a,b,e])})},this._enhancePromise(k),k.abort=function(){return l.abort()},m(),k):!1},_beforeSend:function(a,b){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(b),this._initProgressObject(b),b._progress.loaded=b.loaded=b.uploadedBytes||0,b._progress.total=b.total=this._getTotal(b.files)||1,b._progress.bitrate=b.bitrate=0,this._active+=1,this._progress.loaded+=b.loaded,this._progress.total+=b.total},_onDone:function(b,c,d,e){var f=e._progress.total,g=e._response;e._progress.loaded<f&&this._onProgress(a.Event("progress",{lengthComputable:!0,loaded:f,total:f}),e),g.result=e.result=b,g.textStatus=e.textStatus=c,g.jqXHR=e.jqXHR=d,this._trigger("done",null,e)},_onFail:function(a,b,c,d){var e=d._response;d.recalculateProgress&&(this._progress.loaded-=d._progress.loaded,this._progress.total-=d._progress.total),e.jqXHR=d.jqXHR=a,e.textStatus=d.textStatus=b,e.errorThrown=d.errorThrown=c,this._trigger("fail",null,d)},_onAlways:function(a,b,c,d){this._trigger("always",null,d)},_onSend:function(b,c){c.submit||this._addConvenienceMethods(b,c);var e,f,g,h,d=this,i=d._getAJAXSettings(c),j=function(){return d._sending+=1,i._bitrateTimer=new d._BitrateTimer,e=e||((f||d._trigger("send",a.Event("send",{delegatedEvent:b}),i)===!1)&&d._getXHRPromise(!1,i.context,f)||d._chunkedUpload(i)||a.ajax(i)).done(function(a,b,c){d._onDone(a,b,c,i)}).fail(function(a,b,c){d._onFail(a,b,c,i)}).always(function(a,b,c){if(d._onAlways(a,b,c,i),d._sending-=1,d._active-=1,i.limitConcurrentUploads&&i.limitConcurrentUploads>d._sending)for(var e=d._slots.shift();e;){if("pending"===d._getDeferredState(e)){e.resolve();break}e=d._slots.shift()}0===d._active&&d._trigger("stop")})};return this._beforeSend(b,i),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(g=a.Deferred(),this._slots.push(g),h=g.pipe(j)):(this._sequence=this._sequence.pipe(j,j),h=this._sequence),h.abort=function(){return f=[void 0,"abort","abort"],e?e.abort():(g&&g.rejectWith(i.context,f),j())},this._enhancePromise(h)):j()},_onAdd:function(b,c){var n,o,p,q,d=this,e=!0,f=a.extend({},this.options,c),g=c.files,h=g.length,i=f.limitMultiFileUploads,j=f.limitMultiFileUploadSize,k=f.limitMultiFileUploadSizeOverhead,l=0,m=this._getParamName(f),r=0;if(!h)return!1;if(j&&void 0===g[0].size&&(j=void 0),(f.singleFileUploads||i||j)&&this._isXHRUpload(f))if(f.singleFileUploads||j||!i)if(!f.singleFileUploads&&j)for(p=[],n=[],q=0;h>q;q+=1)l+=g[q].size+k,(q+1===h||l+g[q+1].size+k>j||i&&q+1-r>=i)&&(p.push(g.slice(r,q+1)),o=m.slice(r,q+1),o.length||(o=m),n.push(o),r=q+1,l=0);else n=m;else for(p=[],n=[],q=0;h>q;q+=i)p.push(g.slice(q,q+i)),o=m.slice(q,q+i),o.length||(o=m),n.push(o);else p=[g],n=[m];return c.originalFiles=g,a.each(p||g,function(f,g){var h=a.extend({},c);return h.files=p?g:[g],h.paramName=n[f],d._initResponseObject(h),d._initProgressObject(h),d._addConvenienceMethods(b,h),e=d._trigger("add",a.Event("add",{delegatedEvent:b}),h)}),e},_replaceFileInput:function(b){var c=b.fileInput,d=c.clone(!0),e=c.is(document.activeElement);b.fileInputClone=d,a("<form></form>").append(d)[0].reset(),c.after(d).detach(),e&&d.focus(),a.cleanData(c.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(a,b){return b===c[0]?d[0]:b}),c[0]===this.element[0]&&(this.element=d)},_handleFileTreeEntry:function(b,c){var i,d=this,e=a.Deferred(),f=function(a){a&&!a.entry&&(a.entry=b),e.resolve([a])},g=function(a){d._handleFileTreeEntries(a,c+b.name+"/").done(function(a){e.resolve(a)}).fail(f)},h=function(){i.readEntries(function(a){a.length?(j=j.concat(a),h()):g(j)},f)},j=[];return c=c||"",b.isFile?b._file?(b._file.relativePath=c,e.resolve(b._file)):b.file(function(a){a.relativePath=c,e.resolve(a)},f):b.isDirectory?(i=b.createReader(),h()):e.resolve([]),e.promise()},_handleFileTreeEntries:function(b,c){var d=this;return a.when.apply(a,a.map(b,function(a){return d._handleFileTreeEntry(a,c)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(b){b=b||{};var c=b.items;return c&&c.length&&(c[0].webkitGetAsEntry||c[0].getAsEntry)?this._handleFileTreeEntries(a.map(c,function(a){var b;return a.webkitGetAsEntry?(b=a.webkitGetAsEntry(),b&&(b._file=a.getAsFile()),b):a.getAsEntry()})):a.Deferred().resolve(a.makeArray(b.files)).promise()},_getSingleFileInputFiles:function(b){b=a(b);var d,e,c=b.prop("webkitEntries")||b.prop("entries");if(c&&c.length)return this._handleFileTreeEntries(c);if(d=a.makeArray(b.prop("files")),d.length)void 0===d[0].name&&d[0].fileName&&a.each(d,function(a,b){b.name=b.fileName,b.size=b.fileSize});else{if(e=b.prop("value"),!e)return a.Deferred().resolve([]).promise();d=[{name:e.replace(/^.*\\/,"")}]}return a.Deferred().resolve(d).promise()},_getFileInputFiles:function(b){return b instanceof a&&1!==b.length?a.when.apply(a,a.map(b,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(b)},_onChange:function(b){var c=this,d={fileInput:a(b.target),form:a(b.target.form)};this._getFileInputFiles(d.fileInput).always(function(e){d.files=e,c.options.replaceFileInput&&c._replaceFileInput(d),c._trigger("change",a.Event("change",{delegatedEvent:b}),d)!==!1&&c._onAdd(b,d)})},_onPaste:function(b){var c=b.originalEvent&&b.originalEvent.clipboardData&&b.originalEvent.clipboardData.items,d={files:[]};c&&c.length&&(a.each(c,function(a,b){var c=b.getAsFile&&b.getAsFile();c&&d.files.push(c)}),this._trigger("paste",a.Event("paste",{delegatedEvent:b}),d)!==!1&&this._onAdd(b,d))},_onDrop:function(b){b.dataTransfer=b.originalEvent&&b.originalEvent.dataTransfer;var c=this,d=b.dataTransfer,e={};d&&d.files&&d.files.length&&(b.preventDefault(),this._getDroppedFiles(d).always(function(d){e.files=d,c._trigger("drop",a.Event("drop",{delegatedEvent:b}),e)!==!1&&c._onAdd(b,e)}))},_onDragOver:b("dragover"),_onDragEnter:b("dragenter"),_onDragLeave:b("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),a.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(b,c){var d=-1!==a.inArray(b,this._specialOptions);d&&this._destroyEventHandlers(),this._super(b,c),d&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var b=this.options;void 0===b.fileInput?b.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):b.fileInput instanceof a||(b.fileInput=a(b.fileInput)),b.dropZone instanceof a||(b.dropZone=a(b.dropZone)),b.pasteZone instanceof a||(b.pasteZone=a(b.pasteZone))},_getRegExp:function(a){var b=a.split("/"),c=b.pop();return b.shift(),new RegExp(b.join("/"),c)},_isRegExpOption:function(b,c){return"url"!==b&&"string"===a.type(c)&&/^\/.*\/[igm]{0,3}$/.test(c)},_initDataAttributes:function(){var b=this,c=this.options,d=this.element.data();a.each(this.element[0].attributes,function(a,e){var g,f=e.name.toLowerCase();/^data-/.test(f)&&(f=f.slice(5).replace(/-[a-z]/g,function(a){return a.charAt(1).toUpperCase()}),g=d[f],b._isRegExpOption(f,g)&&(g=b._getRegExp(g)),c[f]=g)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(b){var c=this;b&&!this.options.disabled&&(b.fileInput&&!b.files?this._getFileInputFiles(b.fileInput).always(function(a){b.files=a,c._onAdd(null,b)}):(b.files=a.makeArray(b.files),this._onAdd(null,b)))},send:function(b){if(b&&!this.options.disabled){if(b.fileInput&&!b.files){var f,g,c=this,d=a.Deferred(),e=d.promise();return e.abort=function(){return g=!0,f?f.abort():(d.reject(null,"abort","abort"),e)},this._getFileInputFiles(b.fileInput).always(function(a){if(!g){if(!a.length)return void d.reject();b.files=a,f=c._onSend(null,b),f.then(function(a,b,c){d.resolve(a,b,c)},function(a,b,c){d.reject(a,b,c)})}}),this._enhancePromise(e)}if(b.files=a.makeArray(b.files),b.files.length)return this._onSend(null,b)}return this._getXHRPromise(!1,b&&b.context)}})}),function(a){"use strict";if("function"==typeof define&&define.amd)define(["jquery","jquery.ui.widget","jquery.iframe-transport","jquery.fileupload"],a);else{var b=window.jQuery;a(b),b(function(){void 0!==b.fn.cloudinary_fileupload&&b("input.cloudinary-fileupload[type=file]").cloudinary_fileupload()})}}(function(a){"use strict";function h(a){if(null===a||"undefined"==typeof a)return"";var d,e,b=a+"",c="",f=0;d=e=0,f=b.length;for(var g=0;f>g;g++){var h=b.charCodeAt(g),i=null;128>h?e++:i=h>127&&2048>h?String.fromCharCode(h>>6|192,63&h|128):String.fromCharCode(h>>12|224,h>>6&63|128,63&h|128),null!==i&&(e>d&&(c+=b.slice(d,e)),c+=i,d=e=g+1)}return e>d&&(c+=b.slice(d,f)),c}function i(a){a=h(a);var b="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D",c=0,d=0,e=0;c=-1^c;for(var f=0,g=a.length;g>f;f++)e=255&(c^a.charCodeAt(f)),d="0x"+b.substr(9*e,8),c=c>>>8^d;return c=-1^c,0>c&&(c+=4294967296),c}function j(a,b,c){var d=a[b];return delete a[b],"undefined"==typeof d?c:d}function k(b){return null===b||"undefined"==typeof b?[]:a.isArray(b)?b:[b]}function l(a){return function(b){return k(b).join(a)}}function m(a){return"undefined"!=typeof a&&(""+a).length>0}function n(b){for(var c=k(b.transformation),d=!0,e=0;e<c.length;e++)d=d&&"string"==typeof c[e];if(d)return[];delete b.transformation;for(var f=[],e=0;e<c.length;e++){var g=c[e];"string"==typeof g?f.push("t_"+g):f.push(s(a.extend({},g)))}return f}function o(a){var b=j(a,"size");if(b){var c=b.split("x");a.width=c[0],a.height=c[1]}}function p(a){var b=a.width,c=a.height,d=a.overlay||a.underlay,e=a.crop,f=!d&&!a.angle&&"fit"!=e&&"limit"!=e&&"lfill"!=e;f&&(b&&!a.html_width&&"auto"!==b&&parseFloat(b)>=1&&(a.html_width=b),c&&!a.html_height&&parseFloat(c)>=1&&(a.html_height=c)),e||d||(delete a.width,delete a.height)}function s(a){var b=n(a);if(o(a),p(a),void 0!==a.offset){var c=v(a.offset);delete a.offset,null!==c&&(a.start_offset=c[0],a.end_offset=c[1])}var d=[];for(var e in q){var f=j(a,e);m(f)&&(r[e]&&(f=r[e](f)),m(f)&&d.push(q[e]+"_"+f))}d.sort();var g=j(a,"raw_transformation");m(g)&&d.push(g);var h=d.join(",");return m(h)&&b.push(h),b.join("/")}function v(a){var b;switch(a.constructor){case String:var c="("+u+")..("+u+")";a.match(c)&&(b=a.split(".."));break;case Array:b=a;break;default:b=[null,null]}return b}function w(a){var b=String(a).match(new RegExp("^"+u+"$"));if(b){var c=m(b[5])?"p":"";a=(b[1]||b[4])+c}return a}function x(a){if(!a.match(/^https?:\//)){var b=document.location.protocol+"//"+document.location.host;"?"==a[0]?b+=document.location.pathname:"/"!=a[0]&&(b+=document.location.pathname.replace(/\/[^\/]*$/,"/")),a=b+a}return a}function y(a,b,d,f,g,h,j,k,l){if(b.match(/^\//)&&!j)return"/res"+b;var m=j?"https://":"file:"===window.location.protocol?"file://":"http://";m=l?l+"//":m;var n=!d;if(j)k&&k!=c||(k=d?b+"-res.cloudinary.com":e),
n=n||k==e,null==g&&n&&(g=f),g&&(k=k.replace("res.cloudinary.com","res-"+(i(a)%5+1)+".cloudinary.com")),m+=k;else if(h){var o=f?"a"+(i(a)%5+1)+".":"";m+=o+h}else m+=d?b+"-res":"res",m+=f?"-"+(i(a)%5+1):"",m+=".cloudinary.com";return n&&(m+="/"+b),m}function z(a,b,c,d,e){var f=a+"/"+b;if(c)if("image/upload"==f)f="images";else{if("raw/upload"!=f)throw"URL Suffix only supported for image/upload and raw/upload";f="files"}if(d){if("image/upload"!=f&&"images"!=f)throw"Root path only supported for image/upload";f=""}return e&&"image/upload"==f&&(f="iu"),f}function A(b,c){c=c||{};var d=j(c,"type","upload");"fetch"==d&&(c.fetch_format=c.fetch_format||j(c,"format"));var e=s(c),f=j(c,"resource_type","image"),g=j(c,"version"),h=j(c,"format"),i=j(c,"cloud_name",a.cloudinary.config().cloud_name);if(!i)throw"Unknown cloud_name";var k=j(c,"private_cdn",a.cloudinary.config().private_cdn),l=j(c,"secure_distribution",a.cloudinary.config().secure_distribution),n=j(c,"cname",a.cloudinary.config().cname),o=j(c,"cdn_subdomain",a.cloudinary.config().cdn_subdomain),p=j(c,"secure_cdn_subdomain",a.cloudinary.config().secure_cdn_subdomain),q=j(c,"shorten",a.cloudinary.config().shorten),r=j(c,"secure","https:"==window.location.protocol),t=j(c,"protocol",a.cloudinary.config().protocol),u=j(c,"trust_public_id"),v=j(c,"url_suffix"),w=j(c,"use_root_path",a.cloudinary.config().use_root_path);if(v&&!k)throw"URL Suffix only supported in private CDN";if("fetch"==d&&(b=x(b)),b.search("/")>=0&&!b.match(/^v[0-9]+/)&&!b.match(/^https?:\//)&&!m(g)&&(g=1),b.match(/^https?:/)){if("upload"==d||"asset"==d)return b;b=encodeURIComponent(b).replace(/%3A/g,":").replace(/%2F/g,"/")}else{if(b=encodeURIComponent(decodeURIComponent(b)).replace(/%3A/g,":").replace(/%2F/g,"/"),v){if(v.match(/[\.\/]/))throw"url_suffix should not include . or /";b=b+"/"+v}h&&(u||(b=b.replace(/\.(jpg|png|gif|webp)$/,"")),b=b+"."+h)}var A=z(f,d,v,w,q),B=y(b,i,k,o,p,n,r,l,t),C=[B,A,e,g?"v"+g:"",b].join("/").replace(/([^:])\/+/g,"$1/");return C}function B(a){return 10*Math.ceil(a/10)}function C(b,c){a.cloudinary.config("dpr")&&!c.dpr&&(c.dpr=a.cloudinary.config("dpr"));var d=A(b,c),e=j(c,"html_width"),f=j(c,"html_height");return e&&(c.width=e),f&&(c.height=f),d}function D(b,c,d){var e=c[b]||a.cloudinary.config(b);return"undefined"==typeof e&&(e=d),e}function E(a,b){for(var c=a.length-2;c>=0&&a[c]>=b;)c--;return a[c+1]}function F(a){switch(typeof a){case"object":var b="";return void 0!==a.codec&&(b=a.codec,void 0!==a.profile&&(b+=":"+a.profile,void 0!==a.level&&(b+=":"+a.level))),b;case"string":return a;default:return null}}function G(a,b){return b?b===!0?a:a+'="'+b+'"':void 0}function H(b){var c=a.map(b,function(a,b){return G(b,a)});return c.sort(),c.filter(function(a){return a}).join(" ")}var b="d3jpl91pxevbkh.cloudfront.net",c="cloudinary-a.akamaihd.net",d="res.cloudinary.com",e=d,f={format:"jpg",resource_type:"video"},g=["webm","mp4","ogv"],q={angle:"a",audio_codec:"ac",audio_frequency:"af",background:"b",bit_rate:"br",border:"bo",color:"co",color_space:"cs",crop:"c",default_image:"d",delay:"dl",density:"dn",duration:"du",dpr:"dpr",effect:"e",end_offset:"eo",fetch_format:"f",flags:"fl",gravity:"g",height:"h",opacity:"o",overlay:"l",page:"pg",prefix:"p",quality:"q",radius:"r",start_offset:"so",transformation:"t",underlay:"u",video_codec:"vc",video_sampling:"vs",width:"w",x:"x",y:"y",zoom:"z"},r={angle:function(a){return k(a).join(".")},background:function(a){return a.replace(/^#/,"rgb:")},border:function(b){if(a.isPlainObject(b)){var c=""+(b.width||2),d=(b.color||"black").replace(/^#/,"rgb:");b=c+"px_solid_"+d}return b},color:function(a){return a.replace(/^#/,"rgb:")},dpr:function(a){return a=a.toString(),"auto"===a?"1.0":a.match(/^\d+$/)?a+".0":a},effect:l(":"),flags:l("."),transformation:l("."),video_codec:F,start_offset:w,end_offset:w,duration:w},t="([0-9]*)\\.([0-9]+)|([0-9]+)",u="("+t+")([%pP])?",I=null,J=null,K=!1,L={};a.cloudinary={CF_SHARED_CDN:b,OLD_AKAMAI_SHARED_CDN:c,AKAMAI_SHARED_CDN:d,SHARED_CDN:e,config:function(b,c){if(I||(I={},a('meta[name^="cloudinary_"]').each(function(){I[a(this).attr("name").replace("cloudinary_","")]=a(this).attr("content")})),"undefined"!=typeof c)I[b]=c;else{if("string"==typeof b)return I[b];b&&(I=b)}return I},url:function(b,c){return c=a.extend({},c),A(b,c)},video_url:function(b,c){return c=a.extend({resource_type:"video"},c),A(b,c)},video_thumbnail_url:function(b,c){return c=a.extend({},f,c),A(b,c)},url_internal:A,transformation_string:function(b){return b=a.extend({},b),s(b)},image:function(b,c){c=a.extend({},c);var d=C(b,c),e=a("<img/>").data("src-cache",d).attr(c).cloudinary_update(c);return e},video_thumbnail:function(b,c){c=a.extend({},f,c),image(b,c)},facebook_profile_image:function(b,c){return a.cloudinary.image(b,a.extend({type:"facebook"},c))},twitter_profile_image:function(b,c){return a.cloudinary.image(b,a.extend({type:"twitter"},c))},twitter_name_profile_image:function(b,c){return a.cloudinary.image(b,a.extend({type:"twitter_name"},c))},gravatar_image:function(b,c){return a.cloudinary.image(b,a.extend({type:"gravatar"},c))},fetch_image:function(b,c){return a.cloudinary.image(b,a.extend({type:"fetch"},c))},video:function(b,c){c=c||{},b=b.replace(/\.(mp4|ogv|webm)$/,"");var d=j(c,"source_types",[]),e=j(c,"source_transformation",{}),h=j(c,"fallback_content","");0==d.length&&(d=g);var i=a.extend(!0,{},c);i.hasOwnProperty("poster")?a.isPlainObject(i.poster)&&(i.poster.hasOwnProperty("public_id")?i.poster=A(i.poster.public_id,i.poster):i.poster=A(b,a.extend({},f,i.poster))):i.poster=A(b,a.extend({},f,c)),i.poster||delete i.poster;var l="<video ";i.hasOwnProperty("resource_type")||(i.resource_type="video");var m=a.isArray(d)&&d.length>1,n=b;m||(n=n+"."+k(d)[0]);var o=A(n,i);if(m||(i.src=o),i.hasOwnProperty("html_width")&&(i.width=j(i,"html_width")),i.hasOwnProperty("html_height")&&(i.height=j(i,"html_height")),l=l+H(i)+">",m)for(var p=0;p<d.length;p++){var q=d[p],r=e[q]||{};o=A(n+"."+q,a.extend(!0,{resource_type:"video"},c,r));var s="ogv"==q?"ogg":q,t="video/"+s;l=l+"<source "+H({src:o,type:t})+">"}return l+=h,l+="</video>"},sprite_css:function(b,c){return c=a.extend({type:"sprite"},c),b.match(/.css$/)||(c.format="css"),a.cloudinary.url(b,c)},responsive:function(b){J=a.extend(J||{},b),a("img.cld-responsive, img.cld-hidpi").cloudinary_update(J);var c=D("responsive_resize",J,!0);if(c&&!K){J.resizing=K=!0;var d=null;a(window).on("resize",function(){function c(){d&&(clearTimeout(d),d=null)}function e(){a("img.cld-responsive").cloudinary_update(J)}function f(){c(),setTimeout(function(){c(),e()},b)}var b=D("responsive_debounce",J,100);b?f():e()})}},calc_stoppoint:function(b,c){var d=a(b).data("stoppoints")||a.cloudinary.config().stoppoints||B;return"function"==typeof d?d(c):("string"==typeof d&&(d=a.map(d.split(","),function(a){return parseInt(a)})),E(d,c))},device_pixel_ratio:function(){var b=window.devicePixelRatio||1,c=L[b];if(!c){var d=E(a.cloudinary.supported_dpr_values,b);c=d.toString(),c.match(/^\d+$/)&&(c+=".0"),L[b]=c}return c},supported_dpr_values:[.75,1,1.3,1.5,2,3]},a.fn.cloudinary=function(b){return this.filter("img").each(function(){var c=a.extend({width:a(this).attr("width"),height:a(this).attr("height"),src:a(this).attr("src")},a(this).data(),b),d=j(c,"source",j(c,"src")),e=C(d,c);a(this).data("src-cache",e).attr({width:c.width,height:c.height})}).cloudinary_update(b),this},a.fn.cloudinary_update=function(b){b=b||{};var c=D("responsive_use_stoppoints",b,"resize"),d=c===!1||"resize"==c&&!b.resizing;return this.filter("img").each(function(){b.responsive&&a(this).addClass("cld-responsive");var c={},e=a(this).data("src-cache")||a(this).data("src");if(e){var f=a(this).hasClass("cld-responsive")&&e.match(/\bw_auto\b/);if(f){var i,k,g=a(this).parents(),h=g.length,j=0;for(k=0;h>k&&(i=g[k],!(j=a(i).width()));k+=1);if(0==j)return;var l=d?j:a.cloudinary.calc_stoppoint(this,j),m=a(this).data("width")||0;l>m?a(this).data("width",l):l=m,e=e.replace(/\bw_auto\b/g,"w_"+l),c.width=null,b.responsive_preserve_height||(c.height=null)}c.src=e.replace(/\bdpr_(1\.0|auto)\b/g,"dpr_"+a.cloudinary.device_pixel_ratio()),a(this).attr(c)}}),this};var M=null;a.fn.webpify=function(b,c){var d=this;if(b=b||{},c=c||b,!M){M=a.Deferred();var e=new Image;e.onerror=M.reject,e.onload=M.resolve,e.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA"}return a(function(){M.done(function(){a(d).cloudinary(a.extend({},c,{format:"webp"}))}).fail(function(){a(d).cloudinary(b)})}),this},a.fn.fetchify=function(b){return this.cloudinary(a.extend(b,{type:"fetch"}))},a.fn.fileupload&&(a.cloudinary.delete_by_token=function(b,c){c=c||{};var d=c.url;if(!d){var e=c.cloud_name||a.cloudinary.config().cloud_name;d="https://api.cloudinary.com/v1_1/"+e+"/delete_by_token"}var f=a.support.xhrFileUpload?"json":"iframe json";return a.ajax({url:d,method:"POST",data:{token:b},headers:{"X-Requested-With":"XMLHttpRequest"},dataType:f})},a.fn.cloudinary_fileupload=function(b){var c=!this.data("blueimpFileupload");if(c&&(b=a.extend({maxFileSize:2e7,dataType:"json",headers:{"X-Requested-With":"XMLHttpRequest"}},b)),this.fileupload(b),c&&(this.bind("fileuploaddone",function(b,c){if(!c.result.error){if(c.result.path=["v",c.result.version,"/",c.result.public_id,c.result.format?"."+c.result.format:""].join(""),c.cloudinaryField&&c.form.length>0){var d=[c.result.resource_type,c.result.type,c.result.path].join("/")+"#"+c.result.signature,e=a(b.target).prop("multiple"),f=function(){a("<input/>").attr({type:"hidden",name:c.cloudinaryField}).val(d).appendTo(c.form)};if(e)f();else{var g=a(c.form).find('input[name="'+c.cloudinaryField+'"]');g.length>0?g.val(d):f()}}a(b.target).trigger("cloudinarydone",c)}}),this.bind("fileuploadsend",function(a,b){b.headers["X-Unique-Upload-Id"]=(1e10*Math.random()).toString(16)}),this.bind("fileuploadstart",function(b){a(b.target).trigger("cloudinarystart")}),this.bind("fileuploadstop",function(b){a(b.target).trigger("cloudinarystop")}),this.bind("fileuploadprogress",function(b,c){a(b.target).trigger("cloudinaryprogress",c)}),this.bind("fileuploadprogressall",function(b,c){a(b.target).trigger("cloudinaryprogressall",c)}),this.bind("fileuploadfail",function(b,c){a(b.target).trigger("cloudinaryfail",c)}),this.bind("fileuploadalways",function(b,c){a(b.target).trigger("cloudinaryalways",c)}),!this.fileupload("option").url)){var d=b.cloud_name||a.cloudinary.config().cloud_name,e=b.resource_type||"auto",f=b.type||"upload",g="https://api.cloudinary.com/v1_1/"+d+"/"+e+"/"+f;this.fileupload("option","url",g)}return this},a.fn.cloudinary_upload_url=function(a){this.fileupload("option","formData").file=a,this.fileupload("add",{files:[a]}),delete this.fileupload("option","formData").file},a.fn.unsigned_cloudinary_upload=function(b,c,d){d=d||{},c=a.extend({},c)||{};for(var e=["cloud_name","resource_type","type"],f=0;f<e.length;f++){var g=e[f];c[g]&&(d[g]=c[g],delete c[g])}for(var h in c){var i=c[h];a.isPlainObject(i)?c[h]=a.map(i,function(a,b){return b+"="+a}).join("|"):a.isArray(i)&&(i.length>0&&a.isArray(i[0])?c[h]=a.map(i,function(a){return a.join(",")}).join("|"):c[h]=i.join(","))}c.callback||(c.callback="/cloudinary_cors.html"),c.upload_preset=b,d.formData=c,d.cloudinary_field&&(d.cloudinaryField=d.cloudinary_field,delete d.cloudinary_field);var j=d.html||{};return j["class"]="cloudinary_fileupload "+(j["class"]||""),d.multiple&&(j.multiple=!0),this.attr(j).cloudinary_fileupload(d),this},a.cloudinary.unsigned_upload_tag=function(b,c,d){return a("<input/>").attr({type:"file",name:"file"}).unsigned_cloudinary_upload(b,c,d)})});
