<article class="Playlist Playlist--detail">

	<figure class="Thumbnail" {{bind-attr style=imageBackground}}>
		<button class="Thumbnail-button" {{action "playLatest"}}>{{x-icon i="play"}}</button>

		<div class="Thumbnail-bottom">
			<div class="BtnGroupWrapper Container">
				<div class="BtnGroup">
					{{#if canEdit}}
						{{#link-to 'playlist.add' this class="Btn"}}
							{{x-icon i="plus"}} Add track
						{{/link-to}}
						{{#if isEditing}}
							{{#link-to 'playlist' this class="Btn"}}
								{{x-icon i="pencil"}} Edit
							{{/link-to}}
						{{else}}
							{{#link-to 'playlist.edit' this class="Btn" title="Edit your playlist"}}
								{{x-icon i="pencil"}} Edit
							{{/link-to}}
						{{/if}}
					{{/if}}
				</div>
				<div class="BtnGroup">
					{{#if session.authed}}
						{{x-favorite value=isFavorite action="toggleFavorite"}}
					{{/if}}
				</div>
			</div>
		</div>
	</figure>

	<div class="Playlist-header Section">
		<div class="Container">
			<h1 class="Playlist-title">
				{{#link-to 'playlist' this}}{{title}}{{/link-to}}
				<span class="Muted LastUpdate">({{tracks.length}} tracks, {{lastUpdated}})</span>
			</h1>
			<p class="Playlist-description">{{body}}</p>

			{{!-- <p><button {{action 'claim'}}>claim</button></p> --}}

			{{outlet 'playlist-header'}}
		</div>
	</div>

	{{outlet 'playlist-body'}}

	<div class="Playlist-body">
		{{render 'tracks' tracks}}
	</div>

	<div class="Playlist-favorites Container Container--noPadding">
		{{#if user.favoritePlaylists}}
			<h2>Favorites from {{title}}</h2>
			<ul class="List">
			{{#each playlist in user.favoritePlaylists}}
				<li>
					{{#link-to "playlist" playlist class="PlaylistTeaser"}}
						<h3 class="PlaylistTeaser-title">{{playlist.title}}</h3>
					{{/link-to}}
				</li>
			{{/each}}
			</ul>
		{{/if}}
	</div>
</article>
