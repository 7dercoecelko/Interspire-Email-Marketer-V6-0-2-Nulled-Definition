{
  "rules": {
    "users": {
      ".write": "auth != null && newData.val() != null",
      "$user_id": {
        ".validate": "newData.hasChildren(['created', 'settings'])",
        "channels": {
          "$key1": {
            ".validate": "newData.isBoolean()"
          },
          ".validate": "newData.hasChildren()",
          "$channel_id": {
            ".validate": "newData.hasChildren(['channelPublic', 'created', 'isFeatured', 'slug', 'title', 'updated']) && newData.parent().parent().parent().parent().child('channels').child('channel').val() != null && (auth != null && auth.uid == $user_id && newData.parent().parent().parent().parent().child('users').child($user_id).child('channels').child($channel_id).val() != null) && newData.parent().parent().parent().parent().child('channels').child(channel).child('tracks').val() != null",
            "channelPublic": {
              ".validate": "newData.isString()"
            },
            "created": {
              ".validate": "newData.isNumber()"
            },
            "favoriteChannels": {
              "$key1": {
                ".validate": "newData.isBoolean()"
              },
              ".validate": "newData.hasChildren()"
            },
            "isFeatured": {
              ".validate": "newData.isBoolean()"
            },
            "slug": {
              ".validate": "newData.isString()"
            },
            "title": {
              ".validate": "newData.isString()"
            },
            "tracks": {
              "$key1": {
                ".validate": "newData.isBoolean()"
              },
              ".validate": "newData.hasChildren()"
            },
            "updated": {
              ".validate": "newData.isNumber()"
            },
            "$other": {
              ".validate": "false"
            }
          }
        },
        "created": {
          ".validate": "newData.isNumber()"
        },
        "settings": {
          ".validate": "newData.isString()"
        },
        "$other": {
          ".validate": "false"
        },
        ".read": "auth != null && auth.uid == $user_id",
        ".write": "auth != null && auth.uid == $user_id && newData.val() != null"
      }
    },
    "userSettings": {
      ".validate": "newData.hasChildren(['isRemoteActive', 'user'])",
      "isRemoteActive": {
        ".validate": "newData.isBoolean()"
      },
      "playedChannels": {
        "$key1": {
          ".validate": "newData.isBoolean()"
        },
        ".validate": "newData.hasChildren()"
      },
      "user": {
        ".validate": "newData.isString()"
      },
      "$other": {
        ".validate": "false"
      },
      "$userSetting_id": {
        ".validate": "true",
        ".read": "auth != null && auth.uid == $userSetting_id",
        ".write": "auth != null && auth.uid == $userSetting_id && newData.parent().parent().child('users').child(auth.uid).child('settings').val() == null"
      }
    }
  }
}
